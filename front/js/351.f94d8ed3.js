"use strict";(self["webpackChunkchat_studio_front"]=self["webpackChunkchat_studio_front"]||[]).push([[351],{3351:function(t,e,o){o.r(e),o.d(e,{default:function(){return v}});var s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("el-container",{staticStyle:{height:"100vh"}},[e("el-aside",{staticStyle:{background:"#1a1a1a",color:"white"},attrs:{width:"250px"}},[e("div",{staticClass:"logo",staticStyle:{padding:"20px","text-align":"center","border-bottom":"1px solid #333"}},[e("h2",{staticStyle:{color:"white",margin:"0"}},[t._v("AI Admin")])]),e("el-menu",{staticClass:"sidebar-menu",attrs:{"default-active":t.activeMenu,"background-color":"#1a1a1a","text-color":"#fff","active-text-color":"#00d4aa"},on:{select:t.handleMenuSelect}},[e("el-menu-item",{attrs:{index:"clients"}},[e("i",{staticClass:"el-icon-user"}),e("span",[t._v("客户端管理")])]),e("el-menu-item",{attrs:{index:"prompts"}},[e("i",{staticClass:"el-icon-chat-dot-round"}),e("span",[t._v("系统提示")])]),e("el-menu-item",{attrs:{index:"knowledge"}},[e("i",{staticClass:"el-icon-folder"}),e("span",[t._v("知识库")])]),e("el-menu-item",{attrs:{index:"tools"}},[e("i",{staticClass:"el-icon-setting"}),e("span",[t._v("工具管理")])]),e("el-menu-item",{attrs:{index:"advisors"}},[e("i",{staticClass:"el-icon-star-on"}),e("span",[t._v("顾问管理")])]),e("el-menu-item",{attrs:{index:"models"}},[e("i",{staticClass:"el-icon-cpu"}),e("span",[t._v("模型管理")])]),e("el-menu-item",{attrs:{index:"tasks"}},[e("i",{staticClass:"el-icon-timer"}),e("span",[t._v("智能体任务")])])],1)],1),e("el-main",{staticStyle:{background:"#f5f5f5",padding:"0"}},[e("div",{staticStyle:{background:"white",padding:"16px 24px","box-shadow":"0 2px 8px rgba(0, 0, 0, 0.1)","margin-bottom":"24px",position:"relative"}},[e("h1",{staticStyle:{margin:"0",color:"#1a1a1a"}},[t._v(t._s(t.getPageTitle()))]),e("el-button",{staticStyle:{position:"absolute",right:"24px",top:"16px"},attrs:{icon:"el-icon-right",circle:"",title:"返回聊天"},on:{click:t.goBackToChat}})],1),e("div",{staticStyle:{padding:"0 24px"}},[t.showClientConfig?e("client-config",{attrs:{"client-id":t.editingClient?.id,"client-data":t.editingClient},on:{back:t.onClientConfigBack}}):"clients"===t.activeMenu?e("div",[e("div",{staticStyle:{"margin-bottom":"16px"}},[e("el-button",{attrs:{type:"primary"},on:{click:t.onAddClient}},[e("i",{staticClass:"el-icon-plus"}),t._v(" 新增客户端 ")])],1),e("el-table",{staticStyle:{width:"100%",background:"white"},attrs:{data:t.clients,stripe:!1}},[e("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),e("el-table-column",{attrs:{prop:"clientName",label:"客户端名称"}}),e("el-table-column",{attrs:{prop:"description",label:"描述"}}),e("el-table-column",{attrs:{prop:"status",label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-tag",{attrs:{type:1===o.row.status?"success":"danger"},on:{click:function(e){return t.changeClientStatus(o.row)}}},[t._v(" "+t._s(1===o.row.status?"启用":"禁用")+" ")])]}}])}),e("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.editClient(o.row)}}},[t._v("编辑 ")]),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.deleteClient(o.row)}}},[t._v("删除 ")])]}}])})],1)],1):t._e(),"prompts"===t.activeMenu?e("div",[e("div",{staticStyle:{"margin-bottom":"16px"}},[e("el-button",{attrs:{type:"primary"},on:{click:()=>{t.showPromptDialog=!0,t.promptForm={}}}},[e("i",{staticClass:"el-icon-plus"}),t._v(" 新增提示 ")])],1),e("el-table",{staticStyle:{width:"100%",background:"white"},attrs:{data:t.prompts,stripe:!1}},[e("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),e("el-table-column",{attrs:{prop:"promptName",label:"提示名称"}}),e("el-table-column",{attrs:{prop:"description",label:"描述"}}),e("el-table-column",{attrs:{prop:"status",label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-tag",{attrs:{type:1===o.row.status?"success":"danger"}},[t._v(" "+t._s(1===o.row.status?"启用":"禁用")+" ")])]}}],null,!1,804015614)}),e("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.editPrompt(o.row)}}},[t._v("编辑 ")]),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.deletePrompt(o.row.id)}}},[t._v("删除 ")])]}}],null,!1,3874975620)})],1)],1):t._e(),"knowledge"===t.activeMenu?e("div",[e("div",{staticStyle:{"margin-bottom":"16px"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showKnowledgeDialog=!0}}},[e("i",{staticClass:"el-icon-plus"}),t._v(" 新增知识库 ")]),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:function(e){t.showGitDialog=!0}}},[e("i",{staticClass:"el-icon-link"}),t._v(" 解析仓库 ")])],1),e("el-table",{staticStyle:{width:"100%",background:"white"},attrs:{data:t.knowledgeBase,stripe:!1}},[e("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),e("el-table-column",{attrs:{prop:"ragName",label:"知识库名称"}}),e("el-table-column",{attrs:{prop:"knowledgeTag",label:"标签"}}),e("el-table-column",{attrs:{prop:"status",label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-tag",{attrs:{type:1===o.row.status?"success":"danger"}},[t._v(" "+t._s(1===o.row.status?"启用":"禁用")+" ")])]}}],null,!1,804015614)}),e("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.deleteKnowledge(o.row.id)}}},[t._v("删除 ")])]}}],null,!1,3122148811)})],1)],1):t._e(),"tools"===t.activeMenu?e("div",[e("div",{staticStyle:{"margin-bottom":"16px"}},[e("el-button",{attrs:{type:"primary"},on:{click:()=>{t.showToolDialog=!0,t.resetToolForm()}}},[e("i",{staticClass:"el-icon-plus"}),t._v(" 新增工具 ")])],1),e("el-table",{staticStyle:{width:"100%",background:"white"},attrs:{data:t.tools,stripe:!1}},[e("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),e("el-table-column",{attrs:{prop:"mcpName",label:"工具名称"}}),e("el-table-column",{attrs:{prop:"transportType",label:"传输类型"}}),e("el-table-column",{attrs:{prop:"requestTimeout",label:"超时时间"}}),e("el-table-column",{attrs:{prop:"status",label:"状态",width:"120"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-tag",{attrs:{type:1===o.row.status?"success":"danger"},on:{click:function(e){return t.changeToolStatus(o.row)}}},[t._v(" "+t._s(1===o.row.status?"启用":"禁用")+" ")])]}}],null,!1,4068378553)}),e("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.editTool(o.row)}}},[t._v("编辑 ")]),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.deleteTool(o.row.id)}}},[t._v("删除 ")])]}}],null,!1,2951488004)})],1)],1):t._e(),"advisors"===t.activeMenu?e("div",[e("el-table",{staticStyle:{width:"100%",background:"white"},attrs:{data:t.advisors,stripe:!1}},[e("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),e("el-table-column",{attrs:{prop:"advisorName",label:"顾问名称"}}),e("el-table-column",{attrs:{prop:"advisorType",label:"顾问类型"}}),e("el-table-column",{attrs:{prop:"status",label:"状态",width:"120"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-tag",{attrs:{type:1===o.row.status?"success":"danger"},on:{click:function(e){return t.changeAdvisorStatus(o.row)}}},[t._v(" "+t._s(1===o.row.status?"启用":"禁用")+" ")])]}}],null,!1,2213891157)}),e("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.editAdvisor(o.row)}}},[t._v("编辑 ")]),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.deleteAdvisor(o.row.id)}}},[t._v("删除 ")])]}}],null,!1,3893551652)})],1)],1):t._e(),"models"===t.activeMenu?e("div",[e("div",{staticStyle:{"margin-bottom":"16px"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showModelDialog=!0}}},[e("i",{staticClass:"el-icon-plus"}),t._v(" 新增模型 ")])],1),e("div",[e("el-row",{attrs:{gutter:16}},t._l(t.groupedModels,function(o,s){return e("el-col",{key:s,staticStyle:{"margin-bottom":"16px"},attrs:{span:24}},[e("el-card",{staticStyle:{"border-radius":"10px",padding:"0"},attrs:{shadow:"hover"}},[e("div",{staticStyle:{"font-weight":"bold","font-size":"16px",color:"#1a1a1a",padding:"12px 0 0 0"},attrs:{slot:"header"},slot:"header"},[t._v(" "+t._s(s)+" ")]),e("div",{staticStyle:{"max-height":"320px","overflow-y":"auto",padding:"0 0 0 0"}},[e("el-table",{staticStyle:{width:"100%",background:"white","border-radius":"0 0 10px 10px",margin:"0"},attrs:{data:o,stripe:!1,size:"small","header-cell-style":{background:"#f8f9fa",fontWeight:500},"cell-style":{padding:"8px 0"},height:320}},[e("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),e("el-table-column",{attrs:{prop:"modelVersion",label:"版本"}}),e("el-table-column",{attrs:{prop:"modelType",label:"类型"}}),e("el-table-column",{attrs:{prop:"baseUrl",label:"Base URL"}}),e("el-table-column",{attrs:{prop:"timeout",label:"超时(s)",width:"90"}}),e("el-table-column",{attrs:{prop:"status",label:"状态",width:"120"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-tag",{attrs:{type:1===o.row.status?"success":"danger"},on:{click:function(e){return t.changeModelStatus(o.row)}}},[t._v(" "+t._s(1===o.row.status?"启用":"禁用")+" ")])]}}],null,!0)}),e("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.editModel(o.row)}}},[t._v("编辑 ")]),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.deleteModel(o.row.id)}}},[t._v("删除 ")])]}}],null,!0)})],1)],1)])],1)}),1)],1)]):t._e(),"tasks"===t.activeMenu?e("div",[e("div",{staticStyle:{"margin-bottom":"16px"}},[e("el-button",{attrs:{type:"primary"},on:{click:t.onAddTask}},[e("i",{staticClass:"el-icon-plus"}),t._v(" 新增任务 ")])],1),e("el-table",{staticStyle:{width:"100%",background:"white"},attrs:{data:t.tasks,stripe:!1}},[e("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),e("el-table-column",{attrs:{prop:"agentId",label:"智能体ID"}}),e("el-table-column",{attrs:{prop:"taskName",label:"任务名称"}}),e("el-table-column",{attrs:{prop:"description",label:"描述"}}),e("el-table-column",{attrs:{prop:"cronExpression",label:"Cron表达式"}}),e("el-table-column",{attrs:{prop:"status",label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-tag",{attrs:{type:1===o.row.status?"success":"danger"}},[t._v(" "+t._s(1===o.row.status?"启用":"禁用")+" ")])]}}],null,!1,804015614)}),e("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e("el-table-column",{attrs:{label:"操作",width:"260"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.editTask(o.row)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.deleteTask(o.row.id)}}},[t._v("删除")]),e("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(e){return t.showTaskLog(o.row.id)}}},[t._v("日志")])]}}],null,!1,3347645145)})],1)],1):t._e()],1)])],1),e("el-dialog",{attrs:{title:"系统提示管理",visible:t.showPromptDialog,width:"600px"},on:{"update:visible":function(e){t.showPromptDialog=e}}},[e("el-form",{attrs:{model:t.promptForm,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"提示名称"}},[e("el-input",{model:{value:t.promptForm.promptName,callback:function(e){t.$set(t.promptForm,"promptName",e)},expression:"promptForm.promptName"}})],1),e("el-form-item",{attrs:{label:"描述"}},[e("el-input",{model:{value:t.promptForm.description,callback:function(e){t.$set(t.promptForm,"description",e)},expression:"promptForm.description"}})],1),e("el-form-item",{attrs:{label:"提示内容"}},[e("el-input",{attrs:{type:"textarea",rows:"4"},model:{value:t.promptForm.promptContent,callback:function(e){t.$set(t.promptForm,"promptContent",e)},expression:"promptForm.promptContent"}})],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:()=>{t.showPromptDialog=!1,t.promptForm={}}}},[t._v("取消 ")]),e("el-button",{attrs:{type:"primary"},on:{click:t.savePrompt}},[t._v("保存")])],1)],1),e("el-dialog",{attrs:{title:"新增知识库",visible:t.showKnowledgeDialog,width:"600px"},on:{"update:visible":function(e){t.showKnowledgeDialog=e}}},[e("el-form",{attrs:{model:t.knowledgeForm,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"知识库名称"}},[e("el-input",{model:{value:t.knowledgeForm.ragName,callback:function(e){t.$set(t.knowledgeForm,"ragName",e)},expression:"knowledgeForm.ragName"}})],1),e("el-form-item",{attrs:{label:"知识标签"}},[e("el-input",{model:{value:t.knowledgeForm.knowledgeTag,callback:function(e){t.$set(t.knowledgeForm,"knowledgeTag",e)},expression:"knowledgeForm.knowledgeTag"}})],1),e("el-form-item",{attrs:{label:"上传文件"}},[e("el-upload",{ref:"upload",attrs:{"auto-upload":!1,multiple:!0,"file-list":t.fileList,"on-change":t.handleFileChange,action:""}},[e("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选择文件 ")])],1)],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.showKnowledgeDialog=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.saveKnowledge}},[t._v("保存")])],1)],1),e("el-dialog",{attrs:{title:"解析Git仓库",visible:t.showGitDialog,width:"600px"},on:{"update:visible":function(e){t.showGitDialog=e}}},[e("el-form",{attrs:{model:t.gitForm,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"仓库URL"}},[e("el-input",{attrs:{placeholder:"https://github.com/example/repo.git"},model:{value:t.gitForm.repoUrl,callback:function(e){t.$set(t.gitForm,"repoUrl",e)},expression:"gitForm.repoUrl"}})],1),e("el-form-item",{attrs:{label:"用户名"}},[e("el-input",{model:{value:t.gitForm.userName,callback:function(e){t.$set(t.gitForm,"userName",e)},expression:"gitForm.userName"}})],1),e("el-form-item",{attrs:{label:"访问令牌"}},[e("el-input",{attrs:{type:"password"},model:{value:t.gitForm.token,callback:function(e){t.$set(t.gitForm,"token",e)},expression:"gitForm.token"}})],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.showGitDialog=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.analyzeGitRepo}},[t._v("解析")])],1)],1),e("el-dialog",{attrs:{title:"模型管理",visible:t.showModelDialog,width:"600px"},on:{"update:visible":function(e){t.showModelDialog=e}}},[e("el-form",{attrs:{model:t.modelForm,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"模型名称"}},[e("el-input",{model:{value:t.modelForm.modelName,callback:function(e){t.$set(t.modelForm,"modelName",e)},expression:"modelForm.modelName"}})],1),e("el-form-item",{attrs:{label:"模型类型"}},[e("el-input",{model:{value:t.modelForm.modelType,callback:function(e){t.$set(t.modelForm,"modelType",e)},expression:"modelForm.modelType"}})],1),e("el-form-item",{attrs:{label:"Base URL"}},[e("el-input",{model:{value:t.modelForm.baseUrl,callback:function(e){t.$set(t.modelForm,"baseUrl",e)},expression:"modelForm.baseUrl"}})],1),e("el-form-item",{attrs:{label:"API Key"}},[e("el-input",{model:{value:t.modelForm.apiKey,callback:function(e){t.$set(t.modelForm,"apiKey",e)},expression:"modelForm.apiKey"}})],1),e("el-form-item",{attrs:{label:"Completions Path"}},[e("el-input",{model:{value:t.modelForm.completionsPath,callback:function(e){t.$set(t.modelForm,"completionsPath",e)},expression:"modelForm.completionsPath"}})],1),e("el-form-item",{attrs:{label:"超时(s)"}},[e("el-input-number",{attrs:{min:1},model:{value:t.modelForm.timeout,callback:function(e){t.$set(t.modelForm,"timeout",e)},expression:"modelForm.timeout"}})],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:()=>{t.showModelDialog=!1,t.resetModelForm()}}},[t._v("取消 ")]),e("el-button",{attrs:{type:"primary"},on:{click:t.saveModel}},[t._v("保存")])],1)],1),e("el-dialog",{attrs:{title:"工具管理",visible:t.showToolDialog,width:"600px"},on:{"update:visible":function(e){t.showToolDialog=e}}},[e("el-form",{attrs:{model:t.toolForm,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"工具名称"}},[e("el-input",{model:{value:t.toolForm.mcpName,callback:function(e){t.$set(t.toolForm,"mcpName",e)},expression:"toolForm.mcpName"}})],1),e("el-form-item",{attrs:{label:"传输类型"}},[e("el-select",{staticStyle:{width:"100%"},model:{value:t.toolForm.transportType,callback:function(e){t.$set(t.toolForm,"transportType",e)},expression:"toolForm.transportType"}},[e("el-option",{attrs:{label:"SSE",value:"sse"}}),e("el-option",{attrs:{label:"Stdio",value:"stdio"}})],1)],1),e("el-form-item",{attrs:{label:"传输配置"}},[e("el-input",{attrs:{type:"textarea",rows:10},model:{value:t.toolForm.transportConfig,callback:function(e){t.$set(t.toolForm,"transportConfig",e)},expression:"toolForm.transportConfig"}})],1),e("el-form-item",{attrs:{label:"超时时间"}},[e("el-input-number",{attrs:{min:1},model:{value:t.toolForm.requestTimeout,callback:function(e){t.$set(t.toolForm,"requestTimeout",e)},expression:"toolForm.requestTimeout"}})],1),e("el-form-item",{attrs:{label:"基础工具"}},[e("el-switch",{model:{value:t.toolForm.basic,callback:function(e){t.$set(t.toolForm,"basic",e)},expression:"toolForm.basic"}})],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.showToolDialog=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.saveTool}},[t._v("保存")])],1)],1),e("el-dialog",{attrs:{title:"顾问管理",visible:t.showAdvisorDialog,width:"600px"},on:{"update:visible":function(e){t.showAdvisorDialog=e}}},[e("el-form",{attrs:{model:t.advisorForm,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"顾问名称"}},[e("el-input",{model:{value:t.advisorForm.advisorName,callback:function(e){t.$set(t.advisorForm,"advisorName",e)},expression:"advisorForm.advisorName"}})],1),e("el-form-item",{attrs:{label:"扩展参数"}},[e("el-input",{attrs:{type:"textarea",rows:10},model:{value:t.advisorForm.extParam,callback:function(e){t.$set(t.advisorForm,"extParam",e)},expression:"advisorForm.extParam"}})],1),e("el-form-item",{attrs:{label:"基础顾问"}},[e("el-switch",{model:{value:t.advisorForm.basic,callback:function(e){t.$set(t.advisorForm,"basic",e)},expression:"advisorForm.basic"}})],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.showAdvisorDialog=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.saveAdvisor}},[t._v("保存")])],1)],1),e("el-dialog",{attrs:{title:"智能体任务管理",visible:t.showTaskDialog,width:"600px"},on:{"update:visible":function(e){t.showTaskDialog=e}}},[e("el-form",{attrs:{model:t.taskForm,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"智能体ID"}},[e("el-input",{model:{value:t.taskForm.agentId,callback:function(e){t.$set(t.taskForm,"agentId",e)},expression:"taskForm.agentId"}})],1),e("el-form-item",{attrs:{label:"任务名称"}},[e("el-input",{model:{value:t.taskForm.taskName,callback:function(e){t.$set(t.taskForm,"taskName",e)},expression:"taskForm.taskName"}})],1),e("el-form-item",{attrs:{label:"描述"}},[e("el-input",{model:{value:t.taskForm.description,callback:function(e){t.$set(t.taskForm,"description",e)},expression:"taskForm.description"}})],1),e("el-form-item",{attrs:{label:"Cron表达式"}},[e("el-input",{model:{value:t.taskForm.cronExpression,callback:function(e){t.$set(t.taskForm,"cronExpression",e)},expression:"taskForm.cronExpression"}})],1),e("el-form-item",{attrs:{label:"任务参数"}},[e("el-input",{attrs:{type:"textarea",rows:"3"},model:{value:t.taskForm.taskParam,callback:function(e){t.$set(t.taskForm,"taskParam",e)},expression:"taskForm.taskParam"}})],1),e("el-form-item",{attrs:{label:"状态"}},[e("el-select",{staticStyle:{width:"100%"},model:{value:t.taskForm.status,callback:function(e){t.$set(t.taskForm,"status",e)},expression:"taskForm.status"}},[e("el-option",{attrs:{label:"启用",value:1}}),e("el-option",{attrs:{label:"禁用",value:0}})],1)],1)],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.showTaskDialog=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.saveTask}},[t._v("保存")])],1)],1),e("el-dialog",{attrs:{title:"任务执行日志",visible:t.showTaskLogDialog,width:"900px"},on:{"update:visible":function(e){t.showTaskLogDialog=e}}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.taskLogs,stripe:!1,height:"500"}},[e("el-table-column",{attrs:{prop:"executeTime",label:"执行时间",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.executeTime?e.row.executeTime.replace("T"," ").replace(".000",""):"")+" ")]}}])}),e("el-table-column",{attrs:{prop:"status",label:"状态",width:"100"}}),e("el-table-column",{attrs:{prop:"totalTokens",label:"总令牌数",width:"100"}}),e("el-table-column",{attrs:{prop:"request",label:"请求内容"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("pre",{staticStyle:{"white-space":"pre-wrap","word-break":"break-all"}},[t._v(t._s(o.row.request))])]}}])}),e("el-table-column",{attrs:{prop:"response",label:"响应内容"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("pre",{staticStyle:{"white-space":"pre-wrap","word-break":"break-all"}},[t._v(t._s(o.row.response))])]}}])})],1),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.showTaskLogDialog=!1}}},[t._v("关闭")])],1)],1)],1)},a=[],l=(o(4114),o(8111),o(7588),o(1701),o(7642),o(8004),o(3853),o(5876),o(2475),o(5024),o(1698),o(2332)),i=o.n(l),r=o(8214),n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"config-container"},[e("el-card",{staticClass:"config-card"},[e("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("AI 客户端配置")]),e("el-button",{attrs:{type:"text"},on:{click:t.goBack}},[t._v("返回")])],1),e("el-form",{ref:"clientForm",attrs:{model:t.clientForm,"label-width":"100px",rules:t.rules}},[e("el-form-item",{attrs:{label:"客户端名称",prop:"clientName"}},[e("el-input",{attrs:{placeholder:"请输入客户端名称"},model:{value:t.clientForm.clientName,callback:function(e){t.$set(t.clientForm,"clientName",e)},expression:"clientForm.clientName"}})],1),e("el-form-item",{attrs:{label:"描述",prop:"description"}},[e("el-input",{attrs:{type:"textarea",placeholder:"请输入描述信息"},model:{value:t.clientForm.description,callback:function(e){t.$set(t.clientForm,"description",e)},expression:"clientForm.description"}})],1),e("el-form-item",{attrs:{label:"选择模型",prop:"modelId"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择模型"},model:{value:t.clientForm.modelId,callback:function(e){t.$set(t.clientForm,"modelId",e)},expression:"clientForm.modelId"}},t._l(t.availableModels,function(o,s){return e("el-option-group",{key:s,attrs:{label:s}},t._l(o,function(t){return e("el-option",{key:t.id,attrs:{label:`${t.modelVersion}`,value:t.id}})}),1)}),1)],1),e("el-form-item",{attrs:{label:"系统提示词",prop:"systemPromptId"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择系统提示词"},on:{change:t.handlePromptChange},model:{value:t.clientForm.systemPromptId,callback:function(e){t.$set(t.clientForm,"systemPromptId",e)},expression:"clientForm.systemPromptId"}},t._l(t.systemPrompts,function(t){return e("el-option",{key:t.id,attrs:{label:t.promptName,value:t.id}})}),1)],1),e("el-divider",{attrs:{"content-position":"left"}}),e("el-form-item",{attrs:{label:"选择Advisor"}},[e("el-transfer",{attrs:{data:t.allAdvisors,titles:["可用Advisor","已选Advisor"],props:{key:"id",label:"advisorName"}},model:{value:t.clientForm.advisorIds,callback:function(e){t.$set(t.clientForm,"advisorIds",e)},expression:"clientForm.advisorIds"}})],1),e("el-divider",{attrs:{"content-position":"left"}}),e("el-form-item",{attrs:{label:"选择MCP工具"}},[e("el-transfer",{attrs:{data:t.allMcpTools,titles:["可用MCP工具","已选MCP工具"],props:{key:"id",label:"mcpName"}},model:{value:t.clientForm.mcpIds,callback:function(e){t.$set(t.clientForm,"mcpIds",e)},expression:"clientForm.mcpIds"}})],1),e("el-form-item",{attrs:{label:"选项配置",prop:"options"}},[e("el-input",{attrs:{type:"textarea",rows:"8"},model:{value:t.clientForm.options,callback:function(e){t.$set(t.clientForm,"options",e)},expression:"clientForm.options"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary",loading:t.isSaving},on:{click:t.saveConfig}},[t._v("保存配置")]),e("el-button",{on:{click:t.resetForm}},[t._v("重置")])],1)],1)],1)],1)},c=[],m=(o(116),{mixins:[r.b],name:"ClientConfig",props:{clientId:{type:[Number,String],default:null},clientData:{type:Object,default:null}},data(){return{baseUrl:"http://localhost:8091",clientForm:{id:null,clientName:"",description:"",modelId:null,systemPromptId:null,advisorIds:[],mcpIds:[],options:""},availableModels:{},systemPrompts:[],selectedPromptContent:"",allAdvisors:[],allMcpTools:[],isSaving:!1,rules:{clientName:[{required:!0,message:"请输入客户端名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],modelId:[{required:!0,message:"请选择模型",trigger:"change"}],systemPromptId:[{required:!0,message:"请选择系统提示词",trigger:"change"}]}}},created(){this.fetchModels(),this.fetchSystemPrompts(),this.fetchAdvisors(),this.fetchMcpTools(),this.clientData?this.initClientForm(this.clientData):this.clientId&&this.fetchClientDetails()},methods:{fetchModels(){i().get(`${this.baseUrl}/api/v1/model`).then(t=>{const e=t.data,o={};e.forEach(t=>{o[t.modelName]||(o[t.modelName]=[]),o[t.modelName].push(t)}),this.availableModels=o}).catch(t=>{console.error("Error fetching models:",t),this.$message.error("获取模型列表失败")})},fetchSystemPrompts(){i().get(`${this.baseUrl}/api/v1/prompt`).then(t=>{this.systemPrompts=t.data}).catch(t=>{console.error("Error fetching system prompts:",t),this.$message.error("获取系统提示词失败")})},fetchAdvisors(){i().get(`${this.baseUrl}/api/v1/advisor`).then(t=>{this.allAdvisors=t.data.map(t=>({id:t.id,advisorName:t.advisorName,advisorType:t.advisorType,disabled:1!==t.status}))}).catch(t=>{console.error("Error fetching advisors:",t),this.$message.error("获取Advisor列表失败")})},fetchMcpTools(){i().get(`${this.baseUrl}/api/v1/tools`).then(t=>{this.allMcpTools=t.data.map(t=>({id:t.id,mcpName:t.mcpName,transportType:t.transportType,disabled:1!==t.status}))}).catch(t=>{console.error("Error fetching MCP tools:",t),this.$message.error("获取MCP工具列表失败")})},fetchClientDetails(){i().get(`${this.baseUrl}/api/v1/client/${this.clientId}`).then(t=>{this.initClientForm(t.data)}).catch(t=>{console.error("Error fetching client details:",t),this.$message.error("获取客户端详情失败")})},initClientForm(t){this.clientForm={id:t.id,clientName:t.clientName,description:t.description||"",modelId:t.modelId,systemPromptId:t.systemPromptId,advisorIds:(t.advisorIds||[]).map(Number),mcpIds:(t.mcpIds||[]).map(Number),options:t.options||""},t.systemPromptId&&this.updatePromptContent(t.systemPromptId)},handlePromptChange(t){this.updatePromptContent(t)},updatePromptContent(t){const e=this.systemPrompts.find(e=>e.id===t);this.selectedPromptContent=e?e.promptContent:""},saveConfig(){this.$refs.clientForm.validate(t=>{if(!t)return!1;this.isSaving=!0;const e=this.clientForm.id?this.updateClientAndConfig:this.createClientAndConfig;e().then(()=>{this.$message.success("配置保存成功"),this.goBack()}).catch(t=>{console.error("Error saving config:",t),this.$message.error("保存配置失败")}).finally(()=>{this.isSaving=!1})})},async updateClientAndConfig(){await i().put(`${this.baseUrl}/api/v1/client`,null,{params:{clientId:this.clientForm.id,name:this.clientForm.clientName,description:this.clientForm.description}}),await this.updateClientConfig(this.clientForm.id)},async createClientAndConfig(){const t=await i().post(`${this.baseUrl}/api/v1/client`);let e=t.data&&t.data.id;if(!e){const t=await i().get(`${this.baseUrl}/api/v1/client`),o=Array.isArray(t.data)?t.data:[];e=o.length?Math.max(...o.map(t=>t.id)):1}await this.updateClientConfig(e)},async updateClientConfig(t){let e={};try{e=this.clientForm.options?JSON.parse(this.clientForm.options):{}}catch(o){throw this.$message.error("Options配置项必须为合法JSON"),o}await i().put(`${this.baseUrl}/api/v1/client/config`,{clientId:t,modelId:this.clientForm.modelId,systemPromptId:this.clientForm.systemPromptId,advisorIds:this.clientForm.advisorIds.map(Number),mcpIds:this.clientForm.mcpIds.map(Number),options:e})},resetForm(){this.clientId?this.fetchClientDetails():this.clientData?this.initClientForm(this.clientData):(this.$refs.clientForm.resetFields(),this.selectedPromptContent="")},goBack(){this.$emit("back")}}}),d=m,p=o(1656),u=(0,p.A)(d,n,c,!1,null,"aeda12e2",null),h=u.exports;const g="http://localhost:8091/api/v1/";i().defaults.baseURL=g;var b={name:"AdminDashboard",mixins:[r.b],components:{ClientConfig:h},data(){return{activeMenu:"clients",clients:[],prompts:[],knowledgeBase:[],tools:[],advisors:[],models:[],tasks:[],modelCollapseActiveNames:[],showClientConfig:!1,showPromptDialog:!1,showKnowledgeDialog:!1,showGitDialog:!1,showToolDialog:!1,showAdvisorDialog:!1,showModelDialog:!1,showTaskDialog:!1,showTaskLogDialog:!1,clientForm:{id:null,clientName:"",description:""},promptForm:{id:null,promptName:"",description:"",promptContent:""},knowledgeForm:{ragName:"",knowledgeTag:""},gitForm:{repoUrl:"",userName:"",token:""},toolForm:{id:null,mcpName:"",basic:0,transportType:"sse",transportConfig:'请输入JSON格式的配置参数，例如：\n{\n  "key1": "value1",\n  "key2": "value2"\n}',requestTimeout:5,status:1},advisorForm:{id:null,advisorName:"",basic:!1,extParam:"{}",status:1},modelForm:{id:null,modelName:"",modelType:"",modelVersion:"",baseUrl:"",apiKey:"",completionsPath:"/v1/chat/completions",timeout:30,status:1},taskForm:{id:null,agentId:"",taskName:"",description:"",cronExpression:"",taskParam:"",status:null},taskLogs:[],fileList:[],editingClient:null}},mounted(){this.loadData()},computed:{groupedModels(){const t={};return this.models.forEach(e=>{t[e.modelName]||(t[e.modelName]=[]),t[e.modelName].push(e)}),t}},methods:{handleMenuSelect(t){this.activeMenu=t,this.loadData()},getPageTitle(){const t={clients:"客户端管理",prompts:"系统提示管理",knowledge:"知识库管理",tools:"工具管理",advisors:"顾问管理",models:"模型管理",tasks:"智能体任务管理"};return t[this.activeMenu]||"管理面板"},async loadData(){try{switch(this.activeMenu){case"clients":await this.loadClients();break;case"prompts":await this.loadPrompts();break;case"knowledge":await this.loadKnowledgeBase();break;case"tools":await this.loadTools();break;case"advisors":await this.loadAdvisors();break;case"models":await this.loadModels();break;case"tasks":await this.loadTasks();break}}catch(t){this.$message.error("加载数据失败: "+t.message)}},async loadClients(){const t=await i().get("client");this.clients=t.data},onAddClient(){i().post("client").then(t=>{this.$message.success("新增成功"),this.loadClients()}).catch(t=>{console.error("Error creating client:",t),this.$message.error("创建失败")})},async editClient(t){const e=await i().get(`client/${t.id}`),o=e.data.optionsJsonStr||"{}";this.editingClient={...t,options:o,mcpIds:e.data.mcpIds,advisorIds:e.data.advisorIds},this.showClientConfig=!0},onClientConfigBack(){this.showClientConfig=!1,this.editingClient=null,this.loadClients()},async loadPrompts(){const t=await i().get("prompt");this.prompts=t.data},editPrompt(t){this.promptForm={...t},this.showPromptDialog=!0},async savePrompt(){try{if(this.promptForm.id)await i().put("prompt",this.promptForm);else{const t={promptName:this.promptForm.promptName,description:this.promptForm.description,promptContent:this.promptForm.promptContent};await i().post("prompt",t)}this.$message.success("保存成功"),this.showPromptDialog=!1,this.resetPromptForm(),await this.loadPrompts()}catch(t){this.$message.error("保存失败: "+t.message)}},async deletePrompt(t){try{await this.$confirm("确认删除此提示？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await i()["delete"](`prompt?promptId=${t}`),this.$message.success("删除成功"),await this.loadPrompts()}catch(e){"cancel"!==e&&this.$message.error("删除失败: "+e.message)}},resetPromptForm(){this.promptForm={id:null,promptName:"",description:"",promptContent:""}},async loadKnowledgeBase(){const t=await i().get("rag");this.knowledgeBase=t.data},handleFileChange(t,e){Array.isArray(e)?this.fileList=e:e&&"object"===typeof e&&void 0!==e.length?this.fileList=Array.prototype.slice.call(e):this.fileList=t?[t]:[]},async saveKnowledge(){try{const t=new FormData;t.append("ragName",this.knowledgeForm.ragName),t.append("knowledgeTag",this.knowledgeForm.knowledgeTag),this.fileList.forEach(e=>{t.append("files",e.raw)}),await i().post("rag",t),this.$message.success("保存成功"),this.showKnowledgeDialog=!1,this.resetKnowledgeForm(),await this.loadKnowledgeBase()}catch(t){this.$message.error("保存失败: "+t.message)}},async analyzeGitRepo(){try{const t=new FormData;t.append("repoUrl",this.gitForm.repoUrl),t.append("userName",this.gitForm.userName),t.append("token",this.gitForm.token),await i().post("rag/git",t),this.$message.success("仓库解析成功"),this.showGitDialog=!1,this.resetGitForm(),await this.loadKnowledgeBase()}catch(t){this.$message.error("仓库解析失败: "+t.message)}},async deleteKnowledge(t){try{await this.$confirm("确认删除此知识库？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await i()["delete"](`rag/${t}`),this.$message.success("删除成功"),await this.loadKnowledgeBase()}catch(e){"cancel"!==e&&this.$message.error("删除失败: "+e.message)}},resetKnowledgeForm(){this.knowledgeForm={ragName:"",knowledgeTag:""},this.fileList=[]},resetGitForm(){this.gitForm={repoUrl:"",userName:"",token:""}},async loadTools(){const t=await i().get("tools");this.tools=t.data},editTool(t){this.toolForm={...t},this.showToolDialog=!0},async saveTool(){try{this.toolForm.id?await i().put("tools",this.toolForm):await i().post("tools",this.toolForm),this.$message.success("保存成功"),this.showToolDialog=!1,this.resetToolForm(),await this.loadTools()}catch(t){this.$message.error("保存失败: "+t.message)}},async deleteTool(t){try{await this.$confirm("确认删除此工具？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const e=await i()["delete"]("tools",{params:{toolId:t}});!0===e.data&&(this.$message.success("删除成功"),await this.loadTools())}catch(e){"cancel"!==e&&this.$message.error("该工具有关联数据，无法删除")}},async changeToolStatus(t){try{const e=await i().put("tools/status",null,{params:{toolId:t.id}});!0===e.data&&(this.$message.success("状态变更成功"),await this.loadTools())}catch(e){this.$message.error("该工具有关联数据，无法变更")}},async changeClientStatus(t){const e=await i().put("client",null,{params:{clientId:t.id,name:t.clientName,description:t.description,status:1===t.status?0:1}});e.data&&(this.$message.success("状态变更成功"),await this.loadClients())},async loadAdvisors(){const t=await i().get("advisor");this.advisors=t.data},editAdvisor(t){this.advisorForm={...t},this.showAdvisorDialog=!0},async saveAdvisor(){try{const t=new FormData;t.append("extParams",this.advisorForm.extParam),await i().put(`advisor?advisorId=${this.advisorForm.id}&name=${this.advisorForm.advisorName}&basic=${this.advisorForm.basic}`,t),this.$message.success("保存成功"),this.showAdvisorDialog=!1,await this.loadAdvisors()}catch(t){this.$message.error("保存失败: "+t.message)}},async deleteAdvisor(t){try{await this.$confirm("确认删除此顾问？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const e=await i()["delete"]("advisor",{params:{advisorId:t}});!0===e.data&&(this.$message.success("删除成功"),await this.loadAdvisors())}catch(e){"cancel"!==e&&this.$message.error("该顾问有关联数据，无法删除")}},async changeAdvisorStatus(t){try{const e=await i().put("advisor/status",null,{params:{advisorId:t.id}});!0===e.data&&(this.$message.success("状态变更成功"),await this.loadAdvisors())}catch(e){this.$message.error("存在有关联数据，无法变更")}},async loadModels(){const t=await i().get("model");this.models=t.data,this.modelCollapseActiveNames=[...new Set(this.models.map(t=>t.modelName))]},editModel(t){this.modelForm={...t},this.showModelDialog=!0},async saveModel(){try{this.modelForm.id?await i().put("model",this.modelForm):await i().post("model",this.modelForm),this.$message.success("保存成功"),this.showModelDialog=!1,this.resetModelForm(),await this.loadModels()}catch(t){this.$message.error("保存失败: "+t.message)}},async deleteModel(t){try{await this.$confirm("确认删除此模型？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const e=await i()["delete"]("model",{params:{modelId:t}});!0===e.data?(this.$message.success("删除成功"),await this.loadModels()):this.$message.error("删除失败：该模型有关联数据，无法删除")}catch(e){"cancel"!==e&&this.$message.error("删除失败: "+e.message)}},async changeModelStatus(t){try{const e=await i().put("model/status",null,{params:{modelId:t.id}});!0===e.data?(this.$message.success("状态变更成功"),await this.loadModels()):this.$message.error("状态变更失败：该模型有关联数据，无法变更")}catch(e){this.$message.error("状态变更失败: "+e.message)}},async loadTasks(){const t=await i().get("task");this.tasks=t.data},onAddTask(){this.resetTaskForm(),this.showTaskDialog=!0},editTask(t){this.taskForm={...t},this.showTaskDialog=!0},async saveTask(){try{this.taskForm.id?await i().put("task",this.taskForm):(this.taskForm.status=null,await i().post("task",this.taskForm)),this.$message.success("保存成功"),this.showTaskDialog=!1,this.resetTaskForm(),await this.loadTasks()}catch(t){this.$message.error("保存失败: "+t.message)}},async deleteTask(t){try{await this.$confirm("确认删除此任务？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const e=await i()["delete"](`task/${t}`);e.data?(this.$message.success("删除成功"),await this.loadTasks()):this.$message.warning("请先停用任务")}catch(e){"cancel"!==e&&this.$message.error("删除失败: "+e.message)}},async showTaskLog(t){this.showTaskLogDialog=!0,this.taskLogs=[];try{const e=await this.$axios?this.$axios.get(`task/log/${t}`):await Promise.resolve().then(o.t.bind(o,2332,23)).then(e=>e.default.get(`task/log/${t}`));this.taskLogs=e.data}catch(e){this.$message.error("获取日志失败")}},resetTaskForm(){this.taskForm={id:null,agentId:"",taskName:"",description:"",cronExpression:"",taskParam:"",status:1}},resetToolForm(){this.toolForm={id:null,mcpName:"",transportType:"sse",requestTimeout:180,transportConfig:'请输入JSON格式的配置参数，例如：\n{\n  "key1": "value1",\n  "key2": "value2"\n}'}},resetModelForm(){this.modelForm={id:null,modelName:"",modelType:"",modelVersion:"",baseUrl:"",apiKey:"",completionsPath:"/v1/chat/completions",timeout:30,status:1}},goBackToChat(){this.$router.push("/ai-chat")}}},w=b,f=(0,p.A)(w,s,a,!1,null,null,null),v=f.exports}}]);
//# sourceMappingURL=351.f94d8ed3.js.map